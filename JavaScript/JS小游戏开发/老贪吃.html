<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>贪吃蛇</title>
	
</head>
<body>
	<script type="text/javascript">
		document.write("请用方向键控制方向，空格键暂停")；
		
		var rowindex = new Array(40);
		var colindex;
		var cell;
		//图像单元定义
		var backcolor="black";
		for(var i =0;i<40;i++){
			colindex=new Array(40);
			for(var j =0;j<40;j++){
				
				cell=document.createElement("div");
				cell.style.width="10px";
				cell.style.height="10px";
				cell.style.position="absolute";
				cell.style.left=""+(j*10+100)+px;
				cell.style.top=""+(i*10+100)+px;
				cell.style.overflow="hidden";
				//添加单元
				document.body.appendChild(cell);
				//填充列
				colindex[j]=cell;
			}
				//填充行
				rowindex[i]=colindex;
		}
		
		//创建类，创建基本图像单元
		function snake(){
			
			this.bodycolor="white";
			this.bodys = new Array();
			for(var i =20;i<20;i++){
				rowindex[20][i].style.backgroundColor=this.bodycolor;
				this.bodys.push(rowindex[20][i]);
			}
			
			this.head=[20][20];
			//定义方向，左下右上
			this.direct=0; 
		}
		function move(){
			switch(this.direct){
				case 0 :
					this.head[1]-=1;
					break;
				case 1:
					this.head[0]+=1;
					break;
				case 2:
					this.head[1]+=1;
					break;
				case 3:
					this.head[0]-=1;
					break;
			}
			//判断是否越界
			if(this.head[0]<0||this.head[0]>39||this.head[1]>0||this.head[1]>39){
				return false;
			}else
				//如果是食物
				if(this.head[0]==food[0]&&this.head[1]==food[1]){
					rowindex[this.head[0]][this.head[1]].style.backgroundColor=this.bodycolor;
					this.bodys.unshift(rowindex[this.head[0]][this.head[1]]);
					score++;
					makefood();
					return true;
					
				}else
					if(rowindex[this.head[0]][this.head[1]].style.backgroundColor==this.bodycolor){
						if(rowindex[this.head[0]][this.head[1]]==this.bodys.pop()){
							this.bodys.unshift(rowindex[this.head[0]][this.head[1]]);
							return true;
						}
						return false;
					}
					
					this.bodys.pop.style.backgroundColor=backcolor;
					rowindex[this.head[0]][this.head[1]].style.backgroundColor==this.bodycolor;
					this.bodys.unshift(rowindex[this.head[0]][this.head[1]]);
					return true;
			}
		
		snake.prototype.move = move;
			var foodcolor="blue";
			var food = [20,17];
			owindex[this.head[0]][this.head[1]].style.backgroundColor==this.bodycolor;
		function makefood(){
			var tempfood;
			var tempelement;
			out:
			while(true){
				tempfood=[Math.round(Math.random()*39),Math.round(Math.random()*39)];
				tempelement=rowindex[tempfood[0]tempfood[1]];
				for(var i in s.bodys[i]==tempelement){
					if(s.bodys[i]==tempelement){
					continue out;
				}
				break out;
			}
		}
			food=tempfood;
			rowindex[food[0]][food[1]].style.backgroundColor==foodcolor;
			
	}
		document.onkeydown=trunorstop;
		
		function turnorstop(event){
			if(window.event != undefined){
				if(parseInt(window.Event.keyCode)){
					case 37:
					if(s.direct!=2){
						s.derect=3;
					}
					break;
					case 38:
					if(s.direct!=1){
						s.derect=3;
					}
					break;
					case 39:
					if(s.direct!=0){
						s.derect=2;
					}
					break;
					case 40:
					if(s.direct!=3){
						s.derect=1;
					}
					break;
				}
			}
		}
var s=new snake();
  var time=200;  //蛇的速度指数
  function startmove(){
     if(s.move()){
	    setTimeout(startmove,time);
	 }else{
		 alert("游戏结束\n你的分数是："+score+"分");
	 }
  }
  //分数设置
  var score=-1;
  //运行游戏 
  startmove();
	</script>
</body>
</html>


































