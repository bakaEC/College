# Chapter 6.2 存储型XSS

## 0x00	原理

> 跨站脚本攻击(Cross Site Scripting)即恶意攻击者往Web页面里插入恶意Script代码，当用户浏览该页之时，嵌入其中Web里面的Script代码会被执行，从而达到恶意攻击用户目的。

相比于反射性XSS而言，存储型XSS其实是注重于**存储在页面中**的跨站攻击，而不是即时性的输入JavaScript代码攻击。通过在网页中带存储功能的注入点植入XSS代码，使网页的访问者携带所需信息（如cookie、IP）进入预备好的JavaScript文件，从而进行记录、控制等一系列操作。

通常存储型XSS适用于页面内的储存式可交互显示点，即能被特定用户访问、存储并激发的位置（如评论板、用户面板等）。由于攻击在时间和空间上的随机性，通常使用XSS平台（即托管XSS攻击源文件的平台）进行托管，从而实现多时间多线程的值守。

在XSS托管平台上通常会使用`KeepSession`模式，在此模式下平台会间隔访问抓取到的Cookie，令会话持续，Cookie保持生效。

## 0x01	解题思路

## 0x02	解题过程

## 0x03	思考与要点





file_put_contents()



存储型- 用户输入的数据会被存入数据库或特定文件，页面输出时作为前端代码执行。

见框就插

1. 控制传参
2. 外紧内松
   - 外网管控严格、内网脆弱无比
   - 用户输入的数据处理严格
   - 系统获取的数据处理简单

HTML实体编码 -> htmlspecialchars()

 